<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>直式短除法 - 質因數分解 (左右並排)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Consolas, "Courier New", monospace;
        max-width: 1200px;
        margin: 20px auto;
        padding: 10px;
        background: #f8f9fa;
        color: #212529;
    }
    h1 {
        color: #0d6efd;
        text-align: center;
        margin: 15px 0;
        font-size: 1.6rem;
    }
    .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 3px 12px rgba(0,0,0,0.08);
    }
    .input-section {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
        margin-bottom: 20px;
    }
    .input-group {
        text-align: center;
        min-width: 160px;
    }
    input {
        padding: 8px 10px;
        font-size: 1rem;
        margin: 5px 2px;
        border-radius: 5px;
        width: 140px;
        box-sizing: border-box;
    }
    button {
        padding: 8px 16px;
        font-size: 1rem;
        margin: 5px 2px;
        border-radius: 5px;
        background: #0d6efd;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background: #0b5ed7;
    }
    .results {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: nowrap;
        overflow-x: auto;
        padding-bottom: 8px;
    }
    .result-box {
        flex: 0 0 320px;
    }
    .division {
        font-size: 1.1rem;
        line-height: 1.3;
        white-space: pre;
        background: #f8f9fa;
        padding: 16px 12px; /* 上下 padding 加大一點，看起來更舒服 */
        border-radius: 6px;
        border: 1px solid #dee2e6;
        overflow-x: auto; /* 只保留水平滾動，防止極寬數字溢出 */
        /* 移除 height 限制，讓高度自動撐開 */
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        text-align: left; /* 第二個數預設左對齊 */
    }
    .division-right {
        text-align: right; /* 第一個數靠右對齊 */
    }
    .divisor { color: #2f9e44; font-weight: bold; }
    .factor { color: #e67700; font-weight: bold; }
    .title {
        font-size: 1.1rem;
        color: #333;
        margin-bottom: 6px;
        text-align: center;
        font-weight: bold;
    }
</style>
</head>
<body>
<h1>直式短除法 - 質因數分解</h1>
<div class="container">
    <div class="input-section">
        <div class="input-group">
            <div>第一個數</div>
            <input type="number" id="num1" min="2" placeholder="224" />
            <button onclick="doDivision(1)">分解</button>
        </div>
        <div class="input-group">
            <div>第二個數</div>
            <input type="number" id="num2" min="2" placeholder="756" />
            <button onclick="doDivision(2)">分解</button>
        </div>
    </div>
    <div class="results">
        <div class="result-box">
            <div class="title">第一個數</div>
            <div id="result1" class="division division-right">請輸入數字並按「分解」</div>
        </div>
        <div class="result-box">
            <div class="title">第二個數</div>
            <div id="result2" class="division">請輸入數字並按「分解」</div>
        </div>
    </div>
</div>
<script>
function doDivision(which) {
    const numInput = document.getElementById(`num${which}`);
    const resultDiv = document.getElementById(`result${which}`);
  
    let n = parseInt(numInput.value);
  
    if (isNaN(n) || n < 2) {
        resultDiv.innerHTML = '請輸入 ≥ 2 的正整數！';
        return;
    }
    let lines = [];
    let current = n;
    let d = 2;
    let lastAlignSpace = ' ';
    while (current > 1) {
        while (current % d !== 0) {
            d++;
            if (d * d > current) break;
        }
        if (current % d !== 0) break;
        const divStr = d + '';
        const numStr = current + '';
      
        const leftSpace = ' '.repeat(Math.max(0, 4 - divStr.length));
        lastAlignSpace = leftSpace;
        const lineLength = Math.max(numStr.length + 2, 8);
        const line = '─'.repeat(lineLength);
        lines.push(
            `${leftSpace}<span class="divisor">${divStr}</span>│${numStr}\n` +
            `${leftSpace} ${line}`
        );
        current /= d;
        if (current > 1 && isPrime(current)) {
            break;
        }
    }
    let lastLine = '';
    if (current > 1) {
        lastLine = `${lastAlignSpace} <span class="factor">${current}</span>`;
    }
    resultDiv.innerHTML = lines.join('\n') + '\n' + lastLine;
}
function isPrime(num) {
    if (num <= 1) return false;
    if (num <= 3) return true;
    if (num % 2 === 0 || num % 3 === 0) return false;
    let i = 5;
    while (i * i <= num) {
        if (num % i === 0 || num % (i + 2) === 0) return false;
        i += 6;
    }
    return true;
}
</script>
</body>
</html>